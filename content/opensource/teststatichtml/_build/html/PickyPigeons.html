
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Picky Pigeons &#8212; Tracking Animal Behavior</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=84ace793992934648b4de8eed757e5a2" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.9d8b4a8b9bb19db25eeaddc40d639ba2.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="_static/icon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Hugging Humans" href="HuggingHumans.html" />
    <link rel="prev" title="The Cheeky Cheetahs" href="CheekyCheetahs.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<div class="col-12 col-md-3 bd-sidebar site-navigation " id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Tracking Animal Behavior</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Course Information
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Syllabus.html">
   Syllabus
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Schedule.html">
   Schedule
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Literature.html">
   Literature
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FAQs.html">
   FAQs
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Lectures
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture1.html">
   What is behavior and what does it mean for psychologists?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture2.html">
   How can we measure animal behavior?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture3.html">
   Introduction to DeepLabCut
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture4.html">
   Recent advances in computational ethology
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Exercises
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Exercise1.html">
   Getting started with BORIS
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Exercise2.html">
   Getting started with DeepLabCut
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Exercise3.html">
     DeepLabCut Tutorial
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="DLCjupyter.html">
     DeepLabCut Notebook
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Exercise4.html">
   Data Analysis Tutorial
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="datainspection.html">
     What does data look like
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="kinematicanalysis.html">
     Kinematic analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="machinelearning.html">
     Machine Learning
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Datasets and Projects
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="DataSets.html">
   Datasets
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="ProjectIdeas.html">
   Projects
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="HelpfulHandlers.html">
     Helpful Handlers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="CheekyCheetahs.html">
     The Cheeky Cheetahs
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     The Picky Pigeons
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="HuggingHumans.html">
     Hugging Humans
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="RestlessRaterality.html">
     Restless Raterality
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Feedback
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="feedbackform.html">
   Suggestion Box
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="contactform.html">
   Get in touch
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<!-- This is an invisible pixel that we watch to see if we've scrolled. -->
<div class="sbt-scroll-pixel-helper"></div>
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            <div class="topbar-left">
                
                <label class="nav-toggle-button" for="__navigation">
                    <div class="visually-hidden">Toggle navigation</div>
                    <i class="fas fa-bars"></i>
                </label>
                
            </div>
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/PickyPigeons.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        
        <a class="issues-button"
            href="https://github.com/Guillermo-Hidalgo-Gadea/Seminar-TrackingAnimalBehavior/issues/new?title=Issue%20on%20page%20%2FPickyPigeons.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/Guillermo-Hidalgo-Gadea/Seminar-TrackingAnimalBehavior/main?urlpath=tree/docs/PickyPigeons.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   The Picky Pigeons
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#abstract">
     Abstract
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data-analysis">
     Data Analysis
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#pixel-difference-confidence-of-model">
       1. pixel difference/confidence of model:
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#flow">
       2. flow:
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#explorative-position-in-space">
       3. explorative: Position in space
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#conclusion">
     Conclusion
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#notes">
   Notes
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#for-starting-deeplabcut-use-one-of-the-following-code-cells">
     For starting Deeplabcut use one of the following code cells
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#trouble-shooting">
     Trouble Shooting
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#here-are-some-errors-and-solutions-that-might-occur-while-creating-your-project">
       here are some errors and solutions that might occur while creating your project:
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#this-is-our-own-project-named-picky-pigeons">
     This is our own project - named Picky Pigeons
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#deeplabcut-notebook">
   DeepLabCut Notebook
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#starting-an-existing-project">
     Starting an existing project
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#step-1-import-python-libraries">
       step 1: import python libraries
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#step-2-open-existing-project-using-config-path-command">
       step 2: open existing project using config_path command
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#for-labeling-frames-use-the-following-code-chunks">
     For labeling frames use the following code chunks:
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#step-3-label-frames">
       step 3: Label frames
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#step-4-check-frames">
       step 4: Check frames
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#for-creating-the-training-data-set-and-training-the-model-use-the-code-chunks-of-steps-5-and-6">
     For creating the training data set and training the model use the code chunks of steps 5 and 6:
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#for-creating-a-new-deeplabcut-project-use-the-following-code-blocks">
     For creating a new DeepLabCut Project use the following code blocks
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#configure-project">
       Configure Project
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#these-are-the-body-parts-and-skeleton-connections-we-used-for-the-easy-model">
       These are the body parts and skeleton connections we used for the easy model:
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#these-are-the-bodyparts-and-skeleton-configs-we-used-for-the-complex-model">
       These are the bodyparts and skeleton configs we used for the complex model:
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#extract-frames-from-the-videos">
       Extract frames from the videos
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#label-frames">
       Label Frames
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#step-5-create-training-data-set">
         Step 5: create training data set:
        </a>
        <ul class="nav section-nav flex-column">
         <li class="toc-h5 nav-item toc-entry">
          <a class="reference internal nav-link" href="#alternative-1">
           Alternative 1
          </a>
         </li>
         <li class="toc-h5 nav-item toc-entry">
          <a class="reference internal nav-link" href="#alternative-2">
           Alternative 2
          </a>
         </li>
        </ul>
       </li>
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id1">
         Alternative 1
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#step-6-train-model">
       Step 6: Train Model
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#evaluate-model">
       Evaluate Model
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#analyze-videos">
       Analyze Videos
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#create-labeled-videos">
       Create labeled videos
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#load-existing-model">
     Load Existing Model
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#analyze-new-videos-with-the-previously-trained-model">
       Analyze new videos with the previously trained model
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#extract-outlier-frames">
       Extract outlier frames
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#merge-datasets">
       Merge Datasets
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#re-train-network">
       Re-Train Network
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#start-over-again">
     Start over again…
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>The Picky Pigeons</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   The Picky Pigeons
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#abstract">
     Abstract
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data-analysis">
     Data Analysis
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#pixel-difference-confidence-of-model">
       1. pixel difference/confidence of model:
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#flow">
       2. flow:
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#explorative-position-in-space">
       3. explorative: Position in space
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#conclusion">
     Conclusion
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#notes">
   Notes
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#for-starting-deeplabcut-use-one-of-the-following-code-cells">
     For starting Deeplabcut use one of the following code cells
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#trouble-shooting">
     Trouble Shooting
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#here-are-some-errors-and-solutions-that-might-occur-while-creating-your-project">
       here are some errors and solutions that might occur while creating your project:
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#this-is-our-own-project-named-picky-pigeons">
     This is our own project - named Picky Pigeons
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#deeplabcut-notebook">
   DeepLabCut Notebook
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#starting-an-existing-project">
     Starting an existing project
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#step-1-import-python-libraries">
       step 1: import python libraries
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#step-2-open-existing-project-using-config-path-command">
       step 2: open existing project using config_path command
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#for-labeling-frames-use-the-following-code-chunks">
     For labeling frames use the following code chunks:
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#step-3-label-frames">
       step 3: Label frames
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#step-4-check-frames">
       step 4: Check frames
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#for-creating-the-training-data-set-and-training-the-model-use-the-code-chunks-of-steps-5-and-6">
     For creating the training data set and training the model use the code chunks of steps 5 and 6:
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#for-creating-a-new-deeplabcut-project-use-the-following-code-blocks">
     For creating a new DeepLabCut Project use the following code blocks
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#configure-project">
       Configure Project
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#these-are-the-body-parts-and-skeleton-connections-we-used-for-the-easy-model">
       These are the body parts and skeleton connections we used for the easy model:
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#these-are-the-bodyparts-and-skeleton-configs-we-used-for-the-complex-model">
       These are the bodyparts and skeleton configs we used for the complex model:
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#extract-frames-from-the-videos">
       Extract frames from the videos
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#label-frames">
       Label Frames
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#step-5-create-training-data-set">
         Step 5: create training data set:
        </a>
        <ul class="nav section-nav flex-column">
         <li class="toc-h5 nav-item toc-entry">
          <a class="reference internal nav-link" href="#alternative-1">
           Alternative 1
          </a>
         </li>
         <li class="toc-h5 nav-item toc-entry">
          <a class="reference internal nav-link" href="#alternative-2">
           Alternative 2
          </a>
         </li>
        </ul>
       </li>
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id1">
         Alternative 1
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#step-6-train-model">
       Step 6: Train Model
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#evaluate-model">
       Evaluate Model
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#analyze-videos">
       Analyze Videos
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#create-labeled-videos">
       Create labeled videos
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#load-existing-model">
     Load Existing Model
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#analyze-new-videos-with-the-previously-trained-model">
       Analyze new videos with the previously trained model
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#extract-outlier-frames">
       Extract outlier frames
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#merge-datasets">
       Merge Datasets
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#re-train-network">
       Re-Train Network
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#start-over-again">
     Start over again…
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="the-picky-pigeons">
<h1>The Picky Pigeons<a class="headerlink" href="#the-picky-pigeons" title="Permalink to this headline">¶</a></h1>
<p>This section of the course handbook has been provided as part of the final group project for the Seminar on Tracking Animal Behavior at the Ruhr-University Bochum in WS21/22.</p>
<div class="admonition-project-authors admonition">
<p class="admonition-title">Project Authors</p>
<p>Jil, <code class="docutils literal notranslate"><span class="pre">MSc</span> <span class="pre">Psychology</span></code>, Lea, <code class="docutils literal notranslate"><span class="pre">M.Sc.</span> <span class="pre">Psychology</span></code>, Laurin, <code class="docutils literal notranslate"><span class="pre">M.Sc.</span> <span class="pre">Psychology</span></code>, and Maurice, <code class="docutils literal notranslate"><span class="pre">M.Sc.</span> <span class="pre">Psychology</span></code>.</p>
</div>
<div class="section" id="abstract">
<h2>Abstract<a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h2>
<p>Analyzing animal behavior has always brought up certain challenges, most of which can be overcome using the open source, markerless source estimation toolbox DeepLabCut. When performing a DeepLabCut analysis the most important decision is the number of tracking points used for training the model.</p>
<p>To investigate how this influences the softwares confidence, we trained two models using the same dataframes but different numbers of tracking points.  We used top-view videos of eight pigeons in a cage and extracted 20 frames per video for labeling. For the less complicated model we used seven tracking points; for the more complicated model we added an extra of 15 points, resulting in overall 22 tracking points. We hypothesise the following:</p>
<ol class="simple">
<li><p>There is a lower pixel difference in the complex model.</p></li>
<li><p>The confidence of the model is higher in the complex model.</p></li>
</ol>
<p>Additionally, we investigated how the different complexity levels influence the work flow of labeling the frames. Thus, each group member filled out the Flow-Kurz Skale (Rheinberg, 2000) while labeling each model. We hypothesise that:</p>
<ol class="simple">
<li><p>The experienced flow is higher in the easy model (measured with the Flow-Kurzskala (FKS).</p></li>
</ol>
<p>Overall, we try to figure out, what number of tracking points yields the best balance between workload and accuracy.</p>
<div class="figure align-default" id="pickypigeonsfig0">
<a class="reference internal image-reference" href="_images/Pickypigeonsfig0.svg"><img alt="_images/Pickypigeonsfig0.svg" src="_images/Pickypigeonsfig0.svg" width="900px" /></a>
<p class="caption"><span class="caption-number">Fig. 19 </span><span class="caption-text">Sample of test and training frames from <code class="docutils literal notranslate"><span class="pre">deeplabcut.evaluate_network()</span></code></span><a class="headerlink" href="#pickypigeonsfig0" title="Permalink to this image">¶</a></p>
</div>
</div>
<hr class="docutils" />
<div class="section" id="data-analysis">
<h2>Data Analysis<a class="headerlink" href="#data-analysis" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pixel-difference-confidence-of-model">
<h3>1. pixel difference/confidence of model:<a class="headerlink" href="#pixel-difference-confidence-of-model" title="Permalink to this headline">¶</a></h3>
<p>First, we describe descriptively the mean pixel errors in both models.<br />
The simple model resulted for 1030000  training iterations with a p-cutoff of 0.6 in a test error of 6.7 pixels whereas the complex model resulted in a test error of 6.5 pixels. That means, the complex model was in average 0.2 pixels better in predicting the points.
Although it may be not statistically significant there seems to be a tendency of higher confidence and lower mean pixel error in the complex model than in the easy model. This is contrary to our proposed hypothesis.</p>
</div>
<div class="section" id="flow">
<h3>2. flow:<a class="headerlink" href="#flow" title="Permalink to this headline">¶</a></h3>
<p>Here, we describe our results of our questionnaire to experienced flow.<br />
In the easy model the average flow experience was 50 (range: 7-70), while in the complex model it was 53.25. Besides the flow experience we assessed the concern about the exercise via the flow-scale, resulting in an average of 10 (range: 3-30) in the easy model and an average of 11 in the complex model.<br />
That said, contrary to our hypothesis, the flow seemed to be higher in labeling the complex model instead of the easy model.</p>
</div>
<div class="section" id="explorative-position-in-space">
<h3>3. explorative: Position in space<a class="headerlink" href="#explorative-position-in-space" title="Permalink to this headline">¶</a></h3>
<p>We chose the backcenter point as the point to track the position of the pigeon in space. This point is enclosed in both models which enables a comparison of the models. For comparison, we plot the positions in a scatter plot.</p>
<p>First, import packages and define file, how to read file, and relevant information of file.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># import relevant packages</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># define file that is used, how and what to read of the csv file, and define which columns are used in coords</span>
<span class="n">file</span> <span class="o">=</span> <span class="s1">&#39;C:/Users/USER/Documents/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/166_filtered - Kopie.csv&#39;</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c1">#headings of the columns are = row 0</span>
<span class="n">coords</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="n">data</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;backcenter&#39;</span><span class="p">)]</span> <span class="c1">#all rows and all columns that contain backcenter define coords</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># output coords</span>
<span class="n">coords</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>backcenter</th>
      <th>backcenter.1</th>
      <th>backcenter.2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>819.974548</td>
      <td>494.949646</td>
      <td>0.999818</td>
    </tr>
    <tr>
      <th>1</th>
      <td>819.925218</td>
      <td>494.904734</td>
      <td>0.999708</td>
    </tr>
    <tr>
      <th>2</th>
      <td>821.008876</td>
      <td>495.086856</td>
      <td>0.999528</td>
    </tr>
    <tr>
      <th>3</th>
      <td>822.399030</td>
      <td>495.153400</td>
      <td>0.999729</td>
    </tr>
    <tr>
      <th>4</th>
      <td>823.219302</td>
      <td>494.142786</td>
      <td>0.999571</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>71920</th>
      <td>564.234147</td>
      <td>517.139613</td>
      <td>0.999623</td>
    </tr>
    <tr>
      <th>71921</th>
      <td>564.201800</td>
      <td>517.161179</td>
      <td>0.999610</td>
    </tr>
    <tr>
      <th>71922</th>
      <td>564.292883</td>
      <td>517.262576</td>
      <td>0.999495</td>
    </tr>
    <tr>
      <th>71923</th>
      <td>564.375360</td>
      <td>517.289639</td>
      <td>0.999680</td>
    </tr>
    <tr>
      <th>71924</th>
      <td>564.437141</td>
      <td>517.552503</td>
      <td>0.999595</td>
    </tr>
  </tbody>
</table>
<p>71925 rows × 3 columns</p>
</div></div></div>
</div>
<p>Here, define your first plot of position over time.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># define your plot with the defined coords backcenter as x values and backcenter.1 as y values and label the plot</span>
<span class="n">position_x</span> <span class="o">=</span> <span class="n">coords</span><span class="p">[</span><span class="s1">&#39;backcenter&#39;</span><span class="p">]</span>
<span class="n">position_y</span> <span class="o">=</span> <span class="n">coords</span><span class="p">[</span><span class="s1">&#39;backcenter.1&#39;</span><span class="p">]</span>

<span class="n">pos_x</span><span class="p">,</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">position_x</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="n">pos_y</span><span class="p">,</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">position_y</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Time [frames]&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Position [mm]&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.legend.Legend at 0x197ae19b760&gt;
</pre></div>
</div>
<img alt="_images/PickyPigeons_11_1.png" src="_images/PickyPigeons_11_1.png" />
</div>
</div>
<p>This is how it looks like in the complex model:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="n">Image</span><span class="p">(</span><span class="s2">&quot;F:/Picky_Pigeon_Project-The_Picky_Pigeons_part2-2021-12-17/PlotComplex.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/PickyPigeons_13_0.png" src="_images/PickyPigeons_13_0.png" />
</div>
</div>
<p>You can also define histogram plots for the x and y values each:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># histogram plot with x values</span>
<span class="n">position_x</span><span class="o">.</span><span class="n">hist</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:&gt;
</pre></div>
</div>
<img alt="_images/PickyPigeons_15_1.png" src="_images/PickyPigeons_15_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># histogram plot with y values</span>
<span class="n">position_y</span><span class="o">.</span><span class="n">hist</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:&gt;
</pre></div>
</div>
<img alt="_images/PickyPigeons_16_1.png" src="_images/PickyPigeons_16_1.png" />
</div>
</div>
<p>This is how it looks like in the complex model:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="n">Image</span><span class="p">(</span><span class="s2">&quot;F:/Picky_Pigeon_Project-The_Picky_Pigeons_part2-2021-12-17/histComplex.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/PickyPigeons_18_0.png" src="_images/PickyPigeons_18_0.png" />
</div>
</div>
<p>And finally also a scatter plot:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a 2d plot</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">coords</span><span class="p">[</span><span class="s1">&#39;backcenter&#39;</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">coords</span><span class="p">[</span><span class="s1">&#39;backcenter.1&#39;</span><span class="p">]</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">);</span>

<span class="c1"># adding title and labels</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;2D-model of backcenter in space in the easy model&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;X-axis&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Y-axis&quot;</span><span class="p">)</span>

<span class="c1"># displaying plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/PickyPigeons_20_0.png" src="_images/PickyPigeons_20_0.png" />
</div>
</div>
<p>This is how it looks like in the complex model:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="n">Image</span><span class="p">(</span><span class="s2">&quot;F:/Picky_Pigeon_Project-The_Picky_Pigeons_part2-2021-12-17/complexScatter.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/PickyPigeons_22_0.png" src="_images/PickyPigeons_22_0.png" />
</div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<p>Based on our data analysis the complex and simple model seemed not to differ significantly in accuracy of tracking. It may be that a model with more tracking points is better regarding prediction error and flow experience in a bigger study with more data. However, there may be non-linearic correlations between number of tracking points and accuracy of the model and between number of tracking points and flow-experience. There is no evidence yet and this research question is left for future research.</p>
</div>
</div>
<hr class="docutils" />
<div class="tex2jax_ignore mathjax_ignore section" id="notes">
<h1>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h1>
<hr class="docutils" />
<div class="section" id="for-starting-deeplabcut-use-one-of-the-following-code-cells">
<h2>For starting Deeplabcut use one of the following code cells<a class="headerlink" href="#for-starting-deeplabcut-use-one-of-the-following-code-cells" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. activate conda environment</span>
<span class="n">conda</span> <span class="n">activate</span> <span class="n">dlc</span>
<span class="c1"># 2. start IPython</span>
<span class="n">ipython</span>
<span class="c1"># 3. start DLC GUI</span>
<span class="n">deeplabcut</span><span class="o">.</span><span class="n">launch_dlc</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>or</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. activate conda environment</span>
<span class="n">conda</span> <span class="n">activate</span> <span class="n">dlc</span>
<span class="c1"># 2. run deeplabcut</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">deeplabcut</span>
</pre></div>
</div>
</div>
</div>
<p>For opening a notebook use the following commands:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">activate</span> <span class="n">dlc</span>
<span class="n">cd</span> <span class="n">documents</span>
<span class="n">jupyter</span> <span class="n">notebook</span>
</pre></div>
</div>
</div>
</div>
<p>Remember that the notebook has to be trusted and that the Kernel has to be <em>conda env:dlc</em></p>
<p>For closing/ending a process type strg+c in the prompt</p>
</div>
<hr class="docutils" />
<div class="section" id="trouble-shooting">
<h2>Trouble Shooting<a class="headerlink" href="#trouble-shooting" title="Permalink to this headline">¶</a></h2>
<div class="section" id="here-are-some-errors-and-solutions-that-might-occur-while-creating-your-project">
<h3>here are some errors and solutions that might occur while creating your project:<a class="headerlink" href="#here-are-some-errors-and-solutions-that-might-occur-while-creating-your-project" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>IndexError: list index out of range<br />
–&gt; there mustn´t be more than two bodyparts in a skeleton connection<br />
–&gt; solution: combine only two bodyparts and watch out for indexing</p></li>
<li><p>system cannot find path specified<br />
–&gt; check correctness of path<br />
–&gt; check direction of slashes<br />
–&gt; if you changed the path, run code sections again</p></li>
<li><p>you should not use spaces in path names<br />
–&gt; solution: use underscores or write names together! :)</p></li>
<li><p>do NOT close the prompt or type ctrl+c during processing!!!<br />
–&gt; during processing, there is a star between parentheses and a sand clock on top of the notebook<br />
–&gt; when finished, there is a number bw parentheses</p></li>
<li><p>do not use the mouse in the anaconda prompt!
–&gt; navigate using keyboard</p></li>
<li><p>do not use Alt+F4</p></li>
<li><p>discuss where to locate the tracking points</p></li>
<li><p>name the body parts so that you intuitively understand what they label</p></li>
</ul>
</div>
</div>
<hr class="docutils" />
<div class="section" id="this-is-our-own-project-named-picky-pigeons">
<h2>This is our own project - named Picky Pigeons<a class="headerlink" href="#this-is-our-own-project-named-picky-pigeons" title="Permalink to this headline">¶</a></h2>
<p>We want to investigate if it makes a big difference using a few vs. using a lot of labels. These are our methods:</p>
<ul class="simple">
<li><p>there are 20 frames per video and 8 videos</p></li>
<li><p>the ‘easy’ project uses 7 labels, the ‘hard’ project uses 22 labels during frame labeling (see below under ‘configure project’ for the specification of labels)</p></li>
<li><p>everyone labels 2x20 frames with the easy version, and 2x20 frames with the complex version on the same videos (my videos: nrs. 159, 161)</p></li>
<li><p>after finishing the first video in each condition (so after 20 frames), the questionnaire is filled</p></li>
<li><p>after labeling frames we counter check the labels of each other</p></li>
<li><p>the program trains with 1 million iterations (maximum possible)!!</p></li>
</ul>
<p>our hypotheses:</p>
<ol class="simple">
<li><p>There is a lower pixel difference in the more label version.</p></li>
<li><p>The confidence of the model is higher in the more label version.</p></li>
<li><p>The lower label version is faster to label.</p></li>
<li><p>The experienced flow is higher in the low label version (measured with the Flow-Kurzskala (FKS).</p></li>
</ol>
</div>
</div>
<hr class="docutils" />
<div class="tex2jax_ignore mathjax_ignore section" id="deeplabcut-notebook">
<h1>DeepLabCut Notebook<a class="headerlink" href="#deeplabcut-notebook" title="Permalink to this headline">¶</a></h1>
<div class="section" id="starting-an-existing-project">
<h2>Starting an existing project<a class="headerlink" href="#starting-an-existing-project" title="Permalink to this headline">¶</a></h2>
<p><strong>This is for opening the project via your gui</strong></p>
<p>Sometimes it is easier to start an existing project with your gui because here it is easier to handle the project and pick the config file where you created the project.<br />
For opening your project via the gui use the following code chunk in a new anaconda prompt:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">activate</span> <span class="n">dlc</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">deeplabcut</span>
</pre></div>
</div>
</div>
</div>
<p>When your gui is activated, click <em>“load existing project”</em> and then under <em>“select config file”</em> choose your respective <em>config.yaml</em> file.</p>
<hr class="docutils" />
<p><strong>These are the normal commands:</strong></p>
<div class="section" id="step-1-import-python-libraries">
<h3>step 1: import python libraries<a class="headerlink" href="#step-1-import-python-libraries" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">deeplabcut</span>
    <span class="kn">import</span> <span class="nn">tensorflow</span>
    <span class="kn">import</span> <span class="nn">tkinter</span>
    <span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">filedialog</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Using DeepLabCut version: </span><span class="si">{</span><span class="n">deeplabcut</span><span class="o">.</span> <span class="n">__version__</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Using TensorFlow version: </span><span class="si">{</span><span class="n">tensorflow</span><span class="o">.</span> <span class="n">__version__</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>   

<span class="k">except</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Please run the notebook in in your local environment&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Using DeepLabCut version: 2.2.0.2
Using TensorFlow version: 2.7.0
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="step-2-open-existing-project-using-config-path-command">
<h3>step 2: open existing project using config_path command<a class="headerlink" href="#step-2-open-existing-project-using-config-path-command" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">config_path</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">askopenfilename</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Choose DeepLabCut config.yaml file:&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="for-labeling-frames-use-the-following-code-chunks">
<h2>For labeling frames use the following code chunks:<a class="headerlink" href="#for-labeling-frames-use-the-following-code-chunks" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li><p>label frames</p></li>
<li><p>check frames</p></li>
</ol>
<div class="section" id="step-3-label-frames">
<h3>step 3: Label frames<a class="headerlink" href="#step-3-label-frames" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">label_frames</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="step-4-check-frames">
<h3>step 4: Check frames<a class="headerlink" href="#step-4-check-frames" title="Permalink to this headline">¶</a></h3>
<p>You can plot your labeled frames to check your annotation accuracy.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">check_labels</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Note: If there is a mistake in the labeling, label frames new by rerunning step 3. Then delete the folder with ‘labeled’ at the end and rerun the command ‘check frames’ of step 4.</p>
<p>note: if you already created a training set you can skip the code chunks after ‘create project’</p>
</div>
</div>
<div class="section" id="for-creating-the-training-data-set-and-training-the-model-use-the-code-chunks-of-steps-5-and-6">
<h2>For creating the training data set and training the model use the code chunks of steps 5 and 6:<a class="headerlink" href="#for-creating-the-training-data-set-and-training-the-model-use-the-code-chunks-of-steps-5-and-6" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li><p>create training data set</p></li>
<li><p>train model</p></li>
</ol>
<p><strong>Note:</strong> For comparative DLC projects, i.e., comparing different models based on similar data, the training and test datasets need to be comparable. This needs a little manual coding to re-edit a few files (see below).</p>
<hr class="docutils" />
<p>Note: you don’t need this part if you created a project already</p>
</div>
<div class="section" id="for-creating-a-new-deeplabcut-project-use-the-following-code-blocks">
<h2>For creating a new DeepLabCut Project use the following code blocks<a class="headerlink" href="#for-creating-a-new-deeplabcut-project-use-the-following-code-blocks" title="Permalink to this headline">¶</a></h2>
<p><strong>Import python libraries</strong> needed for this notebook</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">deeplabcut</span>
    <span class="kn">import</span> <span class="nn">tensorflow</span>
    <span class="kn">import</span> <span class="nn">tkinter</span>
    <span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">filedialog</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Using DeepLabCut version: </span><span class="si">{</span><span class="n">deeplabcut</span><span class="o">.</span> <span class="n">__version__</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Using TensorFlow version: </span><span class="si">{</span><span class="n">tensorflow</span><span class="o">.</span> <span class="n">__version__</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>   

<span class="k">except</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Please run the notebook in in your local environment&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Using DeepLabCut version: 2.2.0.2
Using TensorFlow version: 2.7.0
</pre></div>
</div>
</div>
</div>
<p>Start by <strong>selecting the list of videos</strong> to be included in the model.<br />
(You could manually type the full path of each video in a python list as argument of the deeplabcut.create_new_project() function, like so:)<br />
However, instead <strong>use the code chunk below with tkinter</strong> where you can just select the videos and not have to type each one out!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;C:</span><span class="se">\\</span><span class="s1">Users</span><span class="se">\\</span><span class="s1">computername</span><span class="se">\\</span><span class="s1">Videos</span><span class="se">\\</span><span class="s1">reachingvideo1.avi&#39;</span><span class="p">,</span> 
 <span class="s1">&#39;C:</span><span class="se">\\</span><span class="s1">Users</span><span class="se">\\</span><span class="s1">computername</span><span class="se">\\</span><span class="s1">Videos</span><span class="se">\\</span><span class="s1">reachingvideo2.avi&#39;</span><span class="p">,</span> 
 <span class="s1">&#39;C:</span><span class="se">\\</span><span class="s1">Users</span><span class="se">\\</span><span class="s1">computername</span><span class="se">\\</span><span class="s1">Videos</span><span class="se">\\</span><span class="s1">reachingvideo3.avi&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Windows users need to use the double backslash for path directories or a python raw filestring.</p>
</div>
<p><strong>use this code chunk below here:</strong> Instead, we use <code class="docutils literal notranslate"><span class="pre">tkinter</span></code> to open a file dialoge and save the file paths in a python list called <code class="docutils literal notranslate"><span class="pre">videolist</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">video_files</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">askopenfilenames</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Choose new video files to analyze in DeepLabCut:&#39;</span><span class="p">)</span>
<span class="n">videolist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">video_files</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">videolist</span><span class="p">)</span><span class="si">}</span><span class="s1"> videos selected:&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">videolist</span><span class="p">)):</span> 
    <span class="nb">print</span><span class="p">(</span><span class="n">videolist</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>8 videos selected:
C:/Users/USER/Documents/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/159.MP4
C:/Users/USER/Documents/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/161.MP4
C:/Users/USER/Documents/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/162_1100ms_gopro_cut_day4_gp2-007.MP4
C:/Users/USER/Documents/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/163_100ms_gopro_cut_day4_gp1-003.MP4
C:/Users/USER/Documents/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/164_100ms_gopro_cut_day4_gp1-005.MP4
C:/Users/USER/Documents/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/165_600ms_gopro_cut_day7_gp4-004.MP4
C:/Users/USER/Documents/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/166_600ms_gopro_cut_day7_gp4-001.MP4
C:/Users/USER/Documents/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/167_1100ms_gopro_cut_day4_gp2-002.MP4
</pre></div>
</div>
</div>
</div>
<p>Now we <strong>create a new project</strong> using the video paths in <code class="docutils literal notranslate"><span class="pre">videolist</span></code>, give the project a name and set a few parameters:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">config_path</span> <span class="o">=</span> <span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_new_project</span><span class="p">(</span><span class="s1">&#39;Picky_Pigeon_Project&#39;</span><span class="p">,</span> <span class="s1">&#39;The_Picky_Pigeons&#39;</span><span class="p">,</span> <span class="n">videolist</span><span class="p">,</span> <span class="n">working_directory</span><span class="o">=</span><span class="s1">&#39;C:/Users/USER/Desktop/Picky_Pigeon_Project&#39;</span><span class="p">,</span> <span class="n">copy_videos</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">multianimal</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Created &quot;C:\Users\USER\Desktop\Picky_Pigeon_Project\Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17\videos&quot;
Created &quot;C:\Users\USER\Desktop\Picky_Pigeon_Project\Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17\labeled-data&quot;
Created &quot;C:\Users\USER\Desktop\Picky_Pigeon_Project\Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17\training-datasets&quot;
Created &quot;C:\Users\USER\Desktop\Picky_Pigeon_Project\Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17\dlc-models&quot;
Copying the videos
C:\Users\USER\Desktop\Picky_Pigeon_Project\Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17\videos\159.MP4
C:\Users\USER\Desktop\Picky_Pigeon_Project\Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17\videos\161.MP4
C:\Users\USER\Desktop\Picky_Pigeon_Project\Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17\videos\162_1100ms_gopro_cut_day4_gp2-007.MP4
C:\Users\USER\Desktop\Picky_Pigeon_Project\Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17\videos\163_100ms_gopro_cut_day4_gp1-003.MP4
C:\Users\USER\Desktop\Picky_Pigeon_Project\Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17\videos\164_100ms_gopro_cut_day4_gp1-005.MP4
C:\Users\USER\Desktop\Picky_Pigeon_Project\Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17\videos\165_600ms_gopro_cut_day7_gp4-004.MP4
C:\Users\USER\Desktop\Picky_Pigeon_Project\Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17\videos\166_600ms_gopro_cut_day7_gp4-001.MP4
C:\Users\USER\Desktop\Picky_Pigeon_Project\Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17\videos\167_1100ms_gopro_cut_day4_gp2-002.MP4
Generated &quot;C:\Users\USER\Desktop\Picky_Pigeon_Project\Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17\config.yaml&quot;

A new project with name Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17 is created at C:\Users\USER\Desktop\Picky_Pigeon_Project and a configurable file (config.yaml) is stored there. Change the parameters in this file to adapt to your project&#39;s needs.
 Once you have changed the configuration file, use the function &#39;extract_frames&#39; to select frames for labeling.
. [OPTIONAL] Use the function &#39;add_new_videos&#39; to add new videos to your project (at any stage).
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can <strong>load existing DeepLabCut projects</strong> by specifying the config_path as below:</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">config_path</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">askopenfilename</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Choose DeepLabCut config.yaml file:&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="configure-project">
<h3>Configure Project<a class="headerlink" href="#configure-project" title="Permalink to this headline">¶</a></h3>
<p>Now that a new project has been created with a specific directory structure and configuration file, we need to tweak some parameters to <strong>tailor the bodyparts we want to track</strong>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">webbrowser</span>
<span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Please edit bodyparts list to be tracked&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Please edit bodyparts list to be tracked
</pre></div>
</div>
</div>
</div>
<p>Once happy with all <code class="docutils literal notranslate"><span class="pre">bodyparts</span></code>, <code class="docutils literal notranslate"><span class="pre">skeleton:</span></code> and <code class="docutils literal notranslate"><span class="pre">numframes2pick:</span></code> settings, start extracting frames to label:</p>
</div>
<div class="section" id="these-are-the-body-parts-and-skeleton-connections-we-used-for-the-easy-model">
<h3>These are the body parts and skeleton connections we used for the easy model:<a class="headerlink" href="#these-are-the-body-parts-and-skeleton-connections-we-used-for-the-easy-model" title="Permalink to this headline">¶</a></h3>
<p>bodyparts:</p>
<ul class="simple">
<li><p>beaktip</p></li>
<li><p>tophead</p></li>
<li><p>neckbase</p></li>
<li><p>tailend</p></li>
<li><p>wingbowleft</p></li>
<li><p>wingbowright</p></li>
<li><p>backcenter</p></li>
</ul>
<p>start: 0
stop: 1
numframes2pick: 20</p>
<p>Plotting configuration
skeleton:</p>
<ul class="simple">
<li><ul>
<li><p>beaktip</p></li>
<li><p>tophead</p></li>
</ul>
</li>
<li><ul>
<li><p>tophead</p></li>
<li><p>neckbase</p></li>
</ul>
</li>
<li><ul>
<li><p>neckbase</p></li>
<li><p>backcenter</p></li>
</ul>
</li>
<li><ul>
<li><p>backcenter</p></li>
<li><p>tailend</p></li>
</ul>
</li>
<li><ul>
<li><p>neckbase</p></li>
<li><p>wingbowleft</p></li>
</ul>
</li>
<li><ul>
<li><p>neckbase</p></li>
<li><p>wingbowright</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="these-are-the-bodyparts-and-skeleton-configs-we-used-for-the-complex-model">
<h3>These are the bodyparts and skeleton configs we used for the complex model:<a class="headerlink" href="#these-are-the-bodyparts-and-skeleton-configs-we-used-for-the-complex-model" title="Permalink to this headline">¶</a></h3>
<p>bodyparts:</p>
<ul class="simple">
<li><p>beaktip</p></li>
<li><p>beakbase</p></li>
<li><p>beakcornerleft</p></li>
<li><p>beakcornerright</p></li>
<li><p>tophead</p></li>
<li><p>headback</p></li>
<li><p>lefteye</p></li>
<li><p>righteye</p></li>
<li><p>neckbase</p></li>
<li><p>leftshoulder</p></li>
<li><p>rightshoulder</p></li>
<li><p>wingbowleft</p></li>
<li><p>wingbowright</p></li>
<li><p>wingendleft</p></li>
<li><p>wingendright</p></li>
<li><p>chest</p></li>
<li><p>necktocenter</p></li>
<li><p>backcenter</p></li>
<li><p>centertotailend</p></li>
<li><p>tailend</p></li>
<li><p>tailendleft</p></li>
<li><p>tailendright</p></li>
</ul>
<p>start: 0
stop: 1
numframes2pick: 20</p>
<p>Plotting configuration
skeleton:</p>
<ul class="simple">
<li><ul>
<li><p>beaktip</p></li>
<li><p>beakbase</p></li>
</ul>
</li>
<li><ul>
<li><p>beaktip</p></li>
<li><p>beakcornerleft</p></li>
</ul>
</li>
<li><ul>
<li><p>beaktip</p></li>
<li><p>beakcornerright</p></li>
</ul>
</li>
<li><ul>
<li><p>beakbase</p></li>
<li><p>beakcornerleft</p></li>
</ul>
</li>
<li><ul>
<li><p>beakbase</p></li>
<li><p>beakcornerright</p></li>
</ul>
</li>
<li><ul>
<li><p>beakbase</p></li>
<li><p>tophead</p></li>
</ul>
</li>
<li><ul>
<li><p>tophead</p></li>
<li><p>headback</p></li>
</ul>
</li>
<li><ul>
<li><p>headback</p></li>
<li><p>neckbase</p></li>
</ul>
</li>
<li><ul>
<li><p>neckbase</p></li>
<li><p>necktocenter</p></li>
</ul>
</li>
<li><ul>
<li><p>necktocenter</p></li>
<li><p>backcenter</p></li>
</ul>
</li>
<li><ul>
<li><p>backcenter</p></li>
<li><p>centertotailend</p></li>
</ul>
</li>
<li><ul>
<li><p>centertotailend</p></li>
<li><p>tailend</p></li>
</ul>
</li>
<li><ul>
<li><p>centertotailend</p></li>
<li><p>tailendleft</p></li>
</ul>
</li>
<li><ul>
<li><p>centertotailend</p></li>
<li><p>tailendright</p></li>
</ul>
</li>
<li><ul>
<li><p>tailend</p></li>
<li><p>tailendleft</p></li>
</ul>
</li>
<li><ul>
<li><p>tailend</p></li>
<li><p>tailendright</p></li>
</ul>
</li>
<li><ul>
<li><p>neckbase</p></li>
<li><p>leftshoulder</p></li>
</ul>
</li>
<li><ul>
<li><p>neckbase</p></li>
<li><p>rightsoulder</p></li>
</ul>
</li>
<li><ul>
<li><p>leftshoulder</p></li>
<li><p>wingbowleft</p></li>
</ul>
</li>
<li><ul>
<li><p>rightshoulder</p></li>
<li><p>wingbowright</p></li>
</ul>
</li>
<li><ul>
<li><p>wingbowleft</p></li>
<li><p>wingendleft</p></li>
</ul>
</li>
<li><ul>
<li><p>wingbowright</p></li>
<li><p>wingendright</p></li>
</ul>
</li>
<li><ul>
<li><p>chest</p></li>
<li><p>leftshoulder</p></li>
</ul>
</li>
<li><ul>
<li><p>chest</p></li>
<li><p>rightshoulder</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="extract-frames-from-the-videos">
<h3>Extract frames from the videos<a class="headerlink" href="#extract-frames-from-the-videos" title="Permalink to this headline">¶</a></h3>
<p>To label frames, first you need to <strong>extract frames</strong> from the videos. Do that using the following command:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">extract_frames</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;automatic&#39;</span><span class="p">,</span> <span class="n">algo</span><span class="o">=</span><span class="s1">&#39;kmeans&#39;</span><span class="p">,</span> <span class="n">userfeedback</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">crop</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Config file read successfully.
Extracting frames based on kmeans ...
Kmeans-quantization based extracting of frames from 0.0  seconds to 599.97  seconds.
Extracting and downsampling... 71924  frames from the video.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>71924it [10:18, 116.20it/s]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Kmeans clustering ... (this might take a while)
Extracting frames based on kmeans ...
Kmeans-quantization based extracting of frames from 0.0  seconds to 599.98  seconds.
Extracting and downsampling... 71926  frames from the video.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>71926it [10:13, 117.31it/s]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Kmeans clustering ... (this might take a while)
Extracting frames based on kmeans ...
Kmeans-quantization based extracting of frames from 0.0  seconds to 599.99  seconds.
Extracting and downsampling... 71927  frames from the video.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>71927it [10:17, 116.55it/s]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Kmeans clustering ... (this might take a while)
Extracting frames based on kmeans ...
Kmeans-quantization based extracting of frames from 0.0  seconds to 599.98  seconds.
Extracting and downsampling... 71926  frames from the video.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>71926it [10:10, 117.74it/s]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Kmeans clustering ... (this might take a while)
Extracting frames based on kmeans ...
Kmeans-quantization based extracting of frames from 0.0  seconds to 599.98  seconds.
Extracting and downsampling... 71926  frames from the video.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>71926it [10:02, 119.38it/s]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Kmeans clustering ... (this might take a while)
Extracting frames based on kmeans ...
Kmeans-quantization based extracting of frames from 0.0  seconds to 599.99  seconds.
Extracting and downsampling... 71927  frames from the video.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>71927it [10:04, 118.97it/s]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Kmeans clustering ... (this might take a while)
Extracting frames based on kmeans ...
Kmeans-quantization based extracting of frames from 0.0  seconds to 599.97  seconds.
Extracting and downsampling... 71925  frames from the video.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>71925it [09:44, 123.08it/s]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Kmeans clustering ... (this might take a while)
Extracting frames based on kmeans ...
Kmeans-quantization based extracting of frames from 0.0  seconds to 599.99  seconds.
Extracting and downsampling... 71927  frames from the video.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>71927it [09:45, 122.94it/s]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Kmeans clustering ... (this might take a while)
Frames were successfully extracted, for the videos of interest.

You can now label the frames using the function &#39;label_frames&#39; (if you extracted enough frames for all videos).
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="label-frames">
<h3>Label Frames<a class="headerlink" href="#label-frames" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">label_frames</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>You can plot your labeled frames to check your annotation accuracy.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">check_labels</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="step-5-create-training-data-set">
<h4>Step 5: create training data set:<a class="headerlink" href="#step-5-create-training-data-set" title="Permalink to this headline">¶</a></h4>
<p><strong>Note:</strong> This step is edited manually. To compare two models trained on the same frames with different number of keypoints, a single test/train split has to be shared across projects.</p>
<div class="section" id="alternative-1">
<h5>Alternative 1<a class="headerlink" href="#alternative-1" title="Permalink to this headline">¶</a></h5>
<ol class="simple">
<li><p>Create a training dataset on one of the projects (in this case the one with the complete set of keypoints)</p></li>
<li><p>Duplicate the project with identical frames extracted</p></li>
<li><p>Edit the <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code> to adjust project parameters such as keypoints and skeleton</p></li>
<li><p>Re-label identical frames</p></li>
<li><p>Pass the same trainIndices and testIndices to <code class="docutils literal notranslate"><span class="pre">deeplabcut.create_training_dataset()</span></code></p></li>
<li><p>See docstring here: <a class="reference external" href="https://github.com/DeepLabCut/DeepLabCut/blob/2d813d96277b84dae4256b1465e76e79fd9b0bb3/deeplabcut/generate_training_dataset/trainingsetmanipulation.py#L722">https://github.com/DeepLabCut/DeepLabCut/blob/2d813d96277b84dae4256b1465e76e79fd9b0bb3/deeplabcut/generate_training_dataset/trainingsetmanipulation.py#L722</a>
<strong>Pro:</strong> Easy if steps followed carefully<br />
<strong>Con:</strong> Both projects have slightly different labeles, as frames were manually labeled twice. You could have first labeled the smaller project, then duplicate the project, add new keypoints to <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code>, and re-label all frames only for new additional keypoints.</p></li>
</ol>
</div>
<div class="section" id="alternative-2">
<h5>Alternative 2<a class="headerlink" href="#alternative-2" title="Permalink to this headline">¶</a></h5>
<ol class="simple">
<li><p>If both project differ in the number of keypoints, but the lower number of keypoints is a subset of the first, don’t label the same frames manually again! See con above, these keypoints will be slightly different.</p></li>
<li><p>You could now still duplicate the project with larger amount of keypoints</p></li>
<li><p>Edit <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code> file to reduce subset of keypoints</p></li>
<li><p>Maunally remove unwanted keypoints from <code class="docutils literal notranslate"><span class="pre">.h5</span></code> files in <code class="docutils literal notranslate"><span class="pre">labeled-data</span></code></p></li>
<li><p>Pass the same trainIndices and testIndices to <code class="docutils literal notranslate"><span class="pre">deeplabcut.create_training_dataset()</span></code> as above
<strong>Pro:</strong> Two projects use exact same coordinates for common keypoints<br />
<strong>Con:</strong> Messy to manually edit <code class="docutils literal notranslate"><span class="pre">.h5</span></code> files</p></li>
</ol>
</div>
</div>
<div class="section" id="id1">
<h4>Alternative 1<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define the train and test indices as used in the first project</span>
<span class="n">trainIndices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">133</span><span class="p">,</span>  <span class="mi">16</span><span class="p">,</span>   <span class="mi">8</span><span class="p">,</span>  <span class="mi">22</span><span class="p">,</span>  <span class="mi">28</span><span class="p">,</span>  <span class="mi">43</span><span class="p">,</span> <span class="mi">156</span><span class="p">,</span>  <span class="mi">70</span><span class="p">,</span>  <span class="mi">17</span><span class="p">,</span>  <span class="mi">23</span><span class="p">,</span>  <span class="mi">94</span><span class="p">,</span>   <span class="mi">3</span><span class="p">,</span>  <span class="mi">26</span><span class="p">,</span>
          <span class="mi">116</span><span class="p">,</span> <span class="mi">154</span><span class="p">,</span>  <span class="mi">19</span><span class="p">,</span>  <span class="mi">49</span><span class="p">,</span> <span class="mi">137</span><span class="p">,</span> <span class="mi">115</span><span class="p">,</span>   <span class="mi">6</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span>  <span class="mi">92</span><span class="p">,</span>  <span class="mi">89</span><span class="p">,</span> <span class="mi">135</span><span class="p">,</span> <span class="mi">122</span><span class="p">,</span>  <span class="mi">45</span><span class="p">,</span>
          <span class="mi">129</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span>  <span class="mi">61</span><span class="p">,</span>  <span class="mi">33</span><span class="p">,</span>  <span class="mi">27</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span>  <span class="mi">39</span><span class="p">,</span> <span class="mi">144</span><span class="p">,</span> <span class="mi">113</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span>  <span class="mi">38</span><span class="p">,</span>  <span class="mi">14</span><span class="p">,</span> <span class="mi">140</span><span class="p">,</span>
          <span class="mi">123</span><span class="p">,</span>  <span class="mi">36</span><span class="p">,</span>  <span class="mi">75</span><span class="p">,</span>  <span class="mi">20</span><span class="p">,</span>  <span class="mi">88</span><span class="p">,</span> <span class="mi">118</span><span class="p">,</span>  <span class="mi">51</span><span class="p">,</span>  <span class="mi">34</span><span class="p">,</span>  <span class="mi">47</span><span class="p">,</span> <span class="mi">138</span><span class="p">,</span>  <span class="mi">32</span><span class="p">,</span>  <span class="mi">91</span><span class="p">,</span>  <span class="mi">86</span><span class="p">,</span>
          <span class="mi">131</span><span class="p">,</span>  <span class="mi">35</span><span class="p">,</span> <span class="mi">149</span><span class="p">,</span>  <span class="mi">87</span><span class="p">,</span>  <span class="mi">13</span><span class="p">,</span> <span class="mi">103</span><span class="p">,</span>  <span class="mi">64</span><span class="p">,</span>  <span class="mi">58</span><span class="p">,</span> <span class="mi">117</span><span class="p">,</span> <span class="mi">141</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span>   <span class="mi">5</span><span class="p">,</span>   <span class="mi">9</span><span class="p">,</span>
          <span class="mi">139</span><span class="p">,</span> <span class="mi">153</span><span class="p">,</span> <span class="mi">155</span><span class="p">,</span> <span class="mi">145</span><span class="p">,</span> <span class="mi">114</span><span class="p">,</span> <span class="mi">147</span><span class="p">,</span>  <span class="mi">67</span><span class="p">,</span>  <span class="mi">54</span><span class="p">,</span>  <span class="mi">96</span><span class="p">,</span>  <span class="mi">68</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span>  <span class="mi">84</span><span class="p">,</span> <span class="mi">157</span><span class="p">,</span>
          <span class="mi">158</span><span class="p">,</span> <span class="mi">105</span><span class="p">,</span> <span class="mi">127</span><span class="p">,</span>  <span class="mi">42</span><span class="p">,</span>  <span class="mi">10</span><span class="p">,</span>  <span class="mi">69</span><span class="p">,</span>  <span class="mi">57</span><span class="p">,</span>  <span class="mi">98</span><span class="p">,</span> <span class="mi">142</span><span class="p">,</span>  <span class="mi">93</span><span class="p">,</span> <span class="mi">121</span><span class="p">,</span> <span class="mi">151</span><span class="p">,</span>   <span class="mi">7</span><span class="p">,</span>
           <span class="mi">71</span><span class="p">,</span> <span class="mi">112</span><span class="p">,</span> <span class="mi">109</span><span class="p">,</span> <span class="mi">119</span><span class="p">,</span>  <span class="mi">82</span><span class="p">,</span>  <span class="mi">15</span><span class="p">,</span> <span class="mi">107</span><span class="p">,</span>  <span class="mi">60</span><span class="p">,</span> <span class="mi">159</span><span class="p">,</span>  <span class="mi">30</span><span class="p">,</span>  <span class="mi">85</span><span class="p">,</span> <span class="mi">102</span><span class="p">,</span> <span class="mi">125</span><span class="p">,</span>
          <span class="mi">134</span><span class="p">,</span>  <span class="mi">97</span><span class="p">,</span>  <span class="mi">37</span><span class="p">,</span> <span class="mi">136</span><span class="p">,</span>  <span class="mi">11</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span>  <span class="mi">80</span><span class="p">,</span>  <span class="mi">63</span><span class="p">,</span>  <span class="mi">29</span><span class="p">,</span> <span class="mi">104</span><span class="p">,</span>  <span class="mi">40</span><span class="p">,</span>  <span class="mi">31</span><span class="p">,</span>  <span class="mi">50</span><span class="p">,</span>
           <span class="mi">48</span><span class="p">,</span>   <span class="mi">1</span><span class="p">,</span>  <span class="mi">78</span><span class="p">,</span>  <span class="mi">59</span><span class="p">,</span>  <span class="mi">52</span><span class="p">,</span>  <span class="mi">46</span><span class="p">,</span>  <span class="mi">24</span><span class="p">,</span> <span class="mi">146</span><span class="p">,</span>  <span class="mi">74</span><span class="p">,</span> <span class="mi">126</span><span class="p">,</span>  <span class="mi">90</span><span class="p">,</span>  <span class="mi">99</span><span class="p">,</span> <span class="mi">130</span><span class="p">,</span>
           <span class="mi">66</span><span class="p">,</span>  <span class="mi">12</span><span class="p">,</span> <span class="mi">108</span><span class="p">,</span>   <span class="mi">2</span><span class="p">,</span>  <span class="mi">77</span><span class="p">,</span>  <span class="mi">62</span><span class="p">,</span> <span class="mi">152</span><span class="p">,</span>  <span class="mi">72</span><span class="p">,</span>  <span class="mi">81</span><span class="p">,</span>  <span class="mi">41</span><span class="p">,</span>   <span class="mi">4</span><span class="p">,</span>  <span class="mi">53</span><span class="p">,</span> <span class="mi">106</span><span class="p">,</span>
           <span class="mi">18</span><span class="p">,</span>  <span class="mi">76</span><span class="p">,</span>  <span class="mi">65</span><span class="p">,</span>  <span class="mi">95</span><span class="p">,</span> <span class="mi">143</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span>  <span class="mi">56</span><span class="p">,</span>  <span class="mi">55</span><span class="p">,</span>  <span class="mi">25</span><span class="p">])</span>
<span class="n">testIndices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">132</span><span class="p">,</span>  <span class="mi">21</span><span class="p">,</span>  <span class="mi">79</span><span class="p">,</span>  <span class="mi">83</span><span class="p">,</span>  <span class="mi">73</span><span class="p">,</span> <span class="mi">124</span><span class="p">,</span> <span class="mi">148</span><span class="p">,</span>  <span class="mi">44</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Pass the given trainIndices and testIndices to create a new dataset</span>
<span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_training_dataset</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">num_shuffles</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">trainIndices</span><span class="o">=</span><span class="p">[</span><span class="n">trainIndices</span><span class="p">],</span><span class="n">testIndices</span><span class="o">=</span><span class="p">[</span><span class="n">testIndices</span><span class="p">],</span> <span class="n">net_type</span><span class="o">=</span><span class="s1">&#39;resnet_50&#39;</span><span class="p">,</span> <span class="n">augmenter_type</span><span class="o">=</span><span class="s1">&#39;imgaug&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>You passed a split with the following fraction: 95%
The training dataset is successfully created. Use the function &#39;train_network&#39; to start training. Happy training!
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(0.95,
  1,
  (array([133,  16,   8,  22,  28,  43, 156,  70,  17,  23,  94,   3,  26,
          116, 154,  19,  49, 137, 115,   6, 100,  92,  89, 135, 122,  45,
          129,   0,  61,  33,  27, 110,  39, 144, 113, 128,  38,  14, 140,
          123,  36,  75,  20,  88, 118,  51,  34,  47, 138,  32,  91,  86,
          131,  35, 149,  87,  13, 103,  64,  58, 117, 141, 101,   5,   9,
          139, 153, 155, 145, 114, 147,  67,  54,  96,  68, 111,  84, 157,
          158, 105, 127,  42,  10,  69,  57,  98, 142,  93, 121, 151,   7,
           71, 112, 109, 119,  82,  15, 107,  60, 159,  30,  85, 102, 125,
          134,  97,  37, 136,  11, 120,  80,  63,  29, 104,  40,  31,  50,
           48,   1,  78,  59,  52,  46,  24, 146,  74, 126,  90,  99, 130,
           66,  12, 108,   2,  77,  62, 152,  72,  81,  41,   4,  53, 106,
           18,  76,  65,  95, 143, 150,  56,  55,  25]),
   array([132,  21,  79,  83,  73, 124, 148,  44])))]
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="step-6-train-model">
<h3>Step 6: Train Model<a class="headerlink" href="#step-6-train-model" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">train_network</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_snapshots_to_keep</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">displayiters</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">saveiters</span><span class="o">=</span><span class="mi">20000</span><span class="p">,</span> <span class="n">maxiters</span><span class="o">=</span><span class="mi">1030000</span><span class="p">,</span> <span class="n">allow_growth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="evaluate-model">
<h3>Evaluate Model<a class="headerlink" href="#evaluate-model" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">evaluate_network</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span><span class="n">Shuffles</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">plotting</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Note:</strong> Project Path may be too long for Windows if <code class="docutils literal notranslate"><span class="pre">plotting=True</span></code>, try cloning the project to a shallower directory structure, run <code class="docutils literal notranslate"><span class="pre">evaluate_network</span></code> and then move the labeled evaluation frames back to original model.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">evaluate_network</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span><span class="n">Shuffles</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">plotting</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Running  DLC_resnet50_Picky_Pigeon_ProjectDec17shuffle1_1030000  with # of training iterations: 1030000
This net has already been evaluated!
Plotting...(attention scale might be inconsistent in comparison to when data was analyzed; i.e. if you used rescale)
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100%|████████████████████████████████████████████████████████████████████████████████████████████| 160/160 [02:01&lt;00:00,  1.31it/s]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="analyze-videos">
<h3>Analyze Videos<a class="headerlink" href="#analyze-videos" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">video_files</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">askopenfilenames</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Choose new video files to analyze in DeepLabCut:&#39;</span><span class="p">)</span>
<span class="n">videolist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">video_files</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">videolist</span><span class="p">)</span><span class="si">}</span><span class="s1"> videos selected:&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">videolist</span><span class="p">)):</span> 
    <span class="nb">print</span><span class="p">(</span><span class="n">videolist</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>8 videos selected:
E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/159.MP4
E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/161.MP4
E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/162_1100ms_gopro_cut_day4_gp2-007.MP4
E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/163_100ms_gopro_cut_day4_gp1-003.MP4
E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/164_100ms_gopro_cut_day4_gp1-005.MP4
E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/165_600ms_gopro_cut_day7_gp4-004.MP4
E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/166_600ms_gopro_cut_day7_gp4-001.MP4
E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/167_1100ms_gopro_cut_day4_gp2-002.MP4
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">analyze_videos</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">videolist</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">save_as_csv</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">videotype</span><span class="o">=</span><span class="s1">&#39;mp4&#39;</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Using snapshot-1030000 for model E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17\dlc-models\iteration-0\Picky_Pigeon_ProjectDec17-trainset95shuffle1
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\hidalggc\Anaconda3\envs\dlc\lib\site-packages\tensorflow\python\keras\engine\base_layer_v1.py:1692: UserWarning: `layer.apply` is deprecated and will be removed in a future version. Please use `layer.__call__` method instead.
  warnings.warn(&#39;`layer.apply` is deprecated and &#39;
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Starting to analyze %  E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/159.MP4
Loading  E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/159.MP4
Duration of video [s]:  599.97 , recorded with  119.88 fps!
Overall # of frames:  71924  found with (before cropping) frame dimensions:  1280 960
Starting to extract posture
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>72619it [35:07, 34.46it/s]                                                                                                         
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Saving results in E:\SeminarTrackingAnimalBehavior\Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17\videos...
Saving csv poses!
Starting to analyze %  E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/161.MP4
Loading  E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/161.MP4
Duration of video [s]:  599.98 , recorded with  119.88 fps!
Overall # of frames:  71926  found with (before cropping) frame dimensions:  1280 960
Starting to extract posture
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>72619it [35:01, 34.56it/s]                                                                                                         
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Saving results in E:\SeminarTrackingAnimalBehavior\Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17\videos...
Saving csv poses!
Starting to analyze %  E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/162_1100ms_gopro_cut_day4_gp2-007.MP4
Loading  E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/162_1100ms_gopro_cut_day4_gp2-007.MP4
Duration of video [s]:  599.99 , recorded with  119.88 fps!
Overall # of frames:  71927  found with (before cropping) frame dimensions:  1280 960
Starting to extract posture
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>72619it [36:01, 33.60it/s]                                                                                                         
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Saving results in E:\SeminarTrackingAnimalBehavior\Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17\videos...
Saving csv poses!
Starting to analyze %  E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/163_100ms_gopro_cut_day4_gp1-003.MP4
Loading  E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/163_100ms_gopro_cut_day4_gp1-003.MP4
Duration of video [s]:  599.98 , recorded with  119.88 fps!
Overall # of frames:  71926  found with (before cropping) frame dimensions:  1280 960
Starting to extract posture
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>72619it [41:52, 28.90it/s]                                                                                                         
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Saving results in E:\SeminarTrackingAnimalBehavior\Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17\videos...
Saving csv poses!
Starting to analyze %  E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/164_100ms_gopro_cut_day4_gp1-005.MP4
Loading  E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/164_100ms_gopro_cut_day4_gp1-005.MP4
Duration of video [s]:  599.98 , recorded with  119.88 fps!
Overall # of frames:  71926  found with (before cropping) frame dimensions:  1280 960
Starting to extract posture
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>72619it [41:29, 29.17it/s]                                                                                                         
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Saving results in E:\SeminarTrackingAnimalBehavior\Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17\videos...
Saving csv poses!
Starting to analyze %  E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/165_600ms_gopro_cut_day7_gp4-004.MP4
Loading  E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/165_600ms_gopro_cut_day7_gp4-004.MP4
Duration of video [s]:  599.99 , recorded with  119.88 fps!
Overall # of frames:  71927  found with (before cropping) frame dimensions:  1280 960
Starting to extract posture
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>72619it [41:35, 29.10it/s]                                                                                                         
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Saving results in E:\SeminarTrackingAnimalBehavior\Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17\videos...
Saving csv poses!
Starting to analyze %  E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/166_600ms_gopro_cut_day7_gp4-001.MP4
Loading  E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/166_600ms_gopro_cut_day7_gp4-001.MP4
Duration of video [s]:  599.97 , recorded with  119.88 fps!
Overall # of frames:  71925  found with (before cropping) frame dimensions:  1280 960
Starting to extract posture
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>72619it [41:27, 29.19it/s]                                                                                                         
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Saving results in E:\SeminarTrackingAnimalBehavior\Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17\videos...
Saving csv poses!
Starting to analyze %  E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/167_1100ms_gopro_cut_day4_gp2-002.MP4
Loading  E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/167_1100ms_gopro_cut_day4_gp2-002.MP4
Duration of video [s]:  599.99 , recorded with  119.88 fps!
Overall # of frames:  71927  found with (before cropping) frame dimensions:  1280 960
Starting to extract posture
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>72619it [41:54, 28.88it/s]                                                                                                         
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Saving results in E:\SeminarTrackingAnimalBehavior\Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17\videos...
Saving csv poses!
The videos are analyzed. Now your research can truly start! 
 You can create labeled videos with &#39;create_labeled_video&#39;
If the tracking is not satisfactory for some videos, consider expanding the training set. You can use the function &#39;extract_outlier_frames&#39; to extract a few representative outlier frames.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;DLC_resnet50_Picky_Pigeon_ProjectDec17shuffle1_1030000&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">filterpredictions</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span><span class="n">videolist</span><span class="p">,</span> <span class="n">videotype</span><span class="o">=</span><span class="s1">&#39;.mp4&#39;</span><span class="p">,</span><span class="n">filtertype</span><span class="o">=</span> <span class="s1">&#39;arima&#39;</span><span class="p">,</span><span class="n">ARdegree</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">MAdegree</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">analyzeskeleton</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">videolist</span><span class="p">,</span> <span class="n">videotype</span><span class="o">=</span><span class="s1">&#39;.mp4&#39;</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">trainingsetindex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">save_as_csv</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">destfolder</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Processing E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/159.MP4
Processing E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/161.MP4
Processing E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/162_1100ms_gopro_cut_day4_gp2-007.MP4
Processing E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/163_100ms_gopro_cut_day4_gp1-003.MP4
Processing E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/164_100ms_gopro_cut_day4_gp1-005.MP4
Processing E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/165_600ms_gopro_cut_day7_gp4-004.MP4
Processing E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/166_600ms_gopro_cut_day7_gp4-001.MP4
Processing E:/SeminarTrackingAnimalBehavior/Picky_Pigeon_Project-The_Picky_Pigeons-2021-12-17/videos/167_1100ms_gopro_cut_day4_gp2-002.MP4
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="create-labeled-videos">
<h3>Create labeled videos<a class="headerlink" href="#create-labeled-videos" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_labeled_video</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">videolist</span><span class="p">,</span> <span class="n">videotype</span><span class="o">=</span><span class="s1">&#39;.mp4&#39;</span><span class="p">,</span> <span class="n">filtered</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">trailpoints</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">draw_skeleton</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">keypoints_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">plot_trajectories</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">videolist</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="load-existing-model">
<h2>Load Existing Model<a class="headerlink" href="#load-existing-model" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">config_path</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">askopenfilename</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Choose the config.yaml file of your DeepLabCut project:&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Using project path: </span><span class="si">{</span><span class="n">config_path</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Load new videos to analyze and/or merge to the project:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">video_files</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">askopenfilenames</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Choose new video files to analyze in DeepLabCut:&#39;</span><span class="p">)</span>
<span class="n">new_videos</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">video_files</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">new_videos</span><span class="p">)</span><span class="si">}</span><span class="s1"> videos selected:&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">new_videos</span><span class="p">)):</span> 
    <span class="nb">print</span><span class="p">(</span><span class="n">new_videos</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="analyze-new-videos-with-the-previously-trained-model">
<h3>Analyze new videos with the previously trained model<a class="headerlink" href="#analyze-new-videos-with-the-previously-trained-model" title="Permalink to this headline">¶</a></h3>
<p>The analysis results in this step will most probably not look as desired, but this is to be expected. Bare in mind, that we are trying to analyze new, unseen videos with a model trained on different data (i.e., either other individuals, other sessions and maybe even different light conditions or camera angles). The goal of this step is to find out where the model fails to generalize and cover this shortcomings.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">analyze_videos</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">new_videos</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">save_as_csv</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">videotype</span><span class="o">=</span><span class="s1">&#39;mp4&#39;</span> <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">filterpredictions</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">new_videos</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">save_as_csv</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">videotype</span><span class="o">=</span><span class="s1">&#39;mp4&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_labeled_video</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">new_videos</span><span class="p">,</span> <span class="n">filtered</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">videotype</span> <span class="o">=</span> <span class="s1">&#39;mp4&#39;</span><span class="p">,</span> <span class="n">save_frames</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="extract-outlier-frames">
<h3>Extract outlier frames<a class="headerlink" href="#extract-outlier-frames" title="Permalink to this headline">¶</a></h3>
<p>Now this is the interesting part. Instead of including more videos to the project directly, and extracting frames as usual with kmeans, we are taking advantage of the previous model to tell us what frames exactly to label. This active learning step helps us recognize the shortcomings of our model and correct it in a targeted manner.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">extract_outlier_frames</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">new_videos</span><span class="p">,</span> <span class="n">automatic</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Now that we have extracted new frames, we need to go back and start labeling. Instead of starting from the beginning, though, we are provided the model predictions and have to drag and drop them in place. <strong>Note:</strong> Make sure to remove labels that are not visible, the model will often guess the expected position based on learned geometric constraints.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">refine_labels</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>You can again plot your labeled frames to check annotation accuracy.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">check_labels</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>At this point you could get an error message like <a class="reference external" href="https://github.com/DeepLabCut/DeepLabCut/issues/232">this</a> telling you that saving the video path failed. In this case, you need to add the new video paths manually for DLC to include these in the new training set. You can either add them by hand, writing in the config.yaml file in the same format as the first video paths (see <a class="reference external" href="https://github.com/DeepLabCut/DeepLabCut/issues/663#issuecomment-619274975">here</a>), or you can run the following command to add the list of videos to your config file:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">add_new_videos</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">new_videos</span><span class="p">,</span> <span class="n">copy_videos</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>If the permission error persists, try starting a new anaconda terminal as administrator (right click &gt; run as administrator) and then starting jupyter notebook with elevated privileges.</p>
</div>
<div class="section" id="merge-datasets">
<h3>Merge Datasets<a class="headerlink" href="#merge-datasets" title="Permalink to this headline">¶</a></h3>
<p>After refining all outlier frames extracted above, merge the datasets to combine old and new labels in your project.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">merge_datasets</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_training_dataset</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">net_type</span><span class="o">=</span><span class="s1">&#39;resnet_50&#39;</span><span class="p">,</span> <span class="n">augmenter_type</span><span class="o">=</span><span class="s1">&#39;imgaug&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Note:</strong> Make sure that the new videos have been included in the config.yaml file without permission issues (see above).</p>
</div>
<div class="section" id="re-train-network">
<h3>Re-Train Network<a class="headerlink" href="#re-train-network" title="Permalink to this headline">¶</a></h3>
<p>When training a new model with an expanded dataset, you could either choose to start fresh with new data, or use the previous model as pre-trained network for your next model. Although not yet extensively verified, lets belief that transfer learning at least won’t harm the new model.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pose_cfg</span> <span class="o">=</span>  <span class="n">filedialog</span><span class="o">.</span><span class="n">askopenfilename</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Choose DeepLabCut pose_cfg.yaml file from dlc-models:&#39;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">webbrowser</span>
<span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">pose_cfg</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Please edit init_weights to include the path to the last pre-trained model...&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example of own pre-trained model</span>
<span class="n">init_weights</span><span class="p">:</span> <span class="n">D</span><span class="p">:</span>\<span class="n">FacialExpression</span>\<span class="n">old</span><span class="o">-</span><span class="n">DLC</span><span class="o">-</span><span class="n">Project</span>\<span class="n">dlc</span><span class="o">-</span><span class="n">models</span>\<span class="n">iteration</span><span class="o">-</span><span class="mi">0</span>\<span class="n">DLCApr14</span><span class="o">-</span><span class="n">trainset95shuffle1</span>\<span class="n">train</span>\<span class="n">snapshot</span><span class="o">-</span><span class="mi">1030000</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">train_network</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">displayiters</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">saveiters</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="start-over-again">
<h2>Start over again…<a class="headerlink" href="#start-over-again" title="Permalink to this headline">¶</a></h2>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "Guillermo-Hidalgo-Gadea/Seminar-TrackingAnimalBehavior",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="CheekyCheetahs.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">The Cheeky Cheetahs</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="HuggingHumans.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Hugging Humans</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Guillermo Hidalgo Gadea<br/>
    
        &copy; Copyright 2022.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>